# RESTful API

## API 简称接口，就是一些预定义的函数，目的是能够让应用程序或开发人员能够具有访问制定网络资源的能力，而又无需关心访问的代码，或理解内部工作机制的细节

### API的产生

有一个地方统一提供API接口，多个平台直接掉用这个APP接口获取信息

### 基本概念

在RESTful中一切都被认为是资源，每个资源都有对应的URL标示

处理资源使用GET,POST,PUT,DELETE等http方法实现创建，读取，修改，删除等操作

客户端通过四个HTTP动词，对服务器资源进行操作，实现表现层状态转化

表现是指资源的表现，客户端和服务器之间，传递这种的某种表现层

无状态。每个请求是独立的，从客户端到服务器的每个请求必须包含所有的必要信息

TIPS:塔只是一种设计风格而不是标准，只是提供了一种设计原则和约束条件

它主要是用于客户端和服务器端的交互的软件

更简洁，更有层次，更易于实现缓存等机制

### RESTful API规范

#### 1.协议

使用的http协议

#### 2.域名

尽量将API部署在专用域名之下

#### 3.版本

应该将API的版本号放入URL

#### 4.路径

路径又称终点，标示API的具体网址。每个网址代表一种资源，所使用的名词往往与数据库的表明相对应，名词应该使用复数

#### 5.http动词

常用动词有四个

```
POST（create）：在服务器新建一个资源。
DELETE（delete）：在服务器删除资源
PUT（update）：在服务器更新资源
GET（select）：在服务器抽出资源（一项或多项）。 
```

#### 6.过滤信息

如果信息记录数量很多，服务器不可能都将他们返回给用户。API应该提供参数

```
？limit=10：返回指定记录的数量
？offset=10：指定返回记录的开始位置
？page=2&per_page=100:指定第几页，以及每页的记录数。
？sortby=name&order=asc:指定返回结果按照哪个属性排序，以及排序顺序
？animal_type_id=1:指定筛选条件
```

#### 7.状态码

服务器向用户返回的状态码和提示信息，常见的有以下一些

```
200 OK - 【GET】：服务器成功返回用户请求的数据。
201 CREATED -【POST/PUT/PATCH】:用户创建或修改数据
202 Accepted - [*]:表示一个请求已经进入后天排队（异步任务）。
```

#### 8.错误处理

如果产生错误，就该向用户返回出错信息，error作为键名，出错信息作为键值

```
{
    error:"api key",
}
```

#### 9.返回结果

```
GET /collection:返回资源对象的列表
GET /collection/resource:返回单个资源对象
POST /collection:返回新生成的资源对象
PUT /collection/resource:返回完整的资源对象、
PATCH /collection/resource:返回完整的资源对象
DELETE /collection/resource:返回一个空文档
```

## RESTful 和 SOAP以及PRC对比

1.PRC(远程过程调用)：

       是一种允许分布式应用程序调用网络上不同计算机的可用服务机制

